# 視覚障がい者向け化粧支援デバイス 

## **説明**
このプロダクトはP2HACKS2022という学内ハッカソンで作成しました。

3人で1つのチームを組み、私は主なシステムを、Pythonを用いて開発しました。

## **概要**  
【プロダクトの種類】デバイス   
【機能】口紅のはみ出し検知、眉の位置検知  
【目的】口紅のはみ出しの有無や眉の長さを自分で確認できるようになり、一人で化粧をしやすくなること

　開発にあたって、札幌で行われた障害者向けメイクアップセミナーに参加し、視覚障がい者の方に普段の化粧で困っていることを聞くことが出来ました。
 また、資生堂の方に意見を頂き、必要なことや情報を教えて頂きました。

### **コンセプト**  
視覚障がい者も、化粧を楽しめるものづくり

### **対象ユーザ**  
視覚障がい者

## **デモ動画**
デモ動画のYouTubeリンクです。

https://youtu.be/bz-3TZRFLno

[![プロジェクトビデオ_画像](https://user-images.githubusercontent.com/64635773/225652648-9eccc8cb-8c53-41bc-80d5-f9209186f839.jpg)](https://youtu.be/bz-3TZRFLno)


## **操作方法**  
キーボードの「Q」を押すと、プログラムが終了する
### **口紅のはみ出し検知**
1. 台に顔を乗せ、キーボードの「C」を押す  
2. 次に口紅を塗り、もう一度キーボードの「C」を押す   
3. はみ出しがあるかどうかを音声ガイドで知らせる   
4. はみ出しがある場合は、2に戻る

### **眉の位置検知**
1. 台に顔を乗せ、キーボードの「M」を押す    
2. 眉の長短を音声ガイドで知らせる   

## **実装した機能**
### **口紅のはみ出し検知**
1. メイク前とメイク後の写真を撮る  
2. 唇の領域で画像を切り出す  
3. メイク前の画像から、dlibを用いて唇の特徴点を検出  
4. 特徴点を結び、中を塗り潰してマスク画像を生成する  
5. メイク前、メイク後の画像において、それぞれhsv処理をして唇の色領域を抽出する  
6. hsv処理した画像とdlibによって作ったマスク画像をそれぞれ合成する  
7. 画像をそれぞれ上唇と下唇に分ける   
8. それぞれの画像をピクセルごとに比較、違いが何％あるかを調べる  
9. 違いが25％以上の場合は、はみ出していると判断し、音声でユーザーに伝える

### **眉の位置検知**
1. OpenCVを用いてコーナーを検出  
2. コーナー特徴点のうち一番右の座標の点のみを抽出  
3. 小鼻、目尻の特徴点を結んだ直線と眉尻の点の距離を計算する  
4. 距離が大きいとき適切な位置に眉尻がないと判定する  
5. 直線より眉尻が上にあれば短い、下にあれば長いと判断し、ユーザーに音声で伝える

## 開発技術 

**利用したプログラミング言語**  
Python

**利用したフレームワーク・ライブラリ**  
* Visual Studio Code
* OpenCV
* dlib

**その他開発に使用したツール・サービス**  
* DaVinci Resolve 
* Slack 
* Teams 
